<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Winnick Connection</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
body{font-family:Segoe UI,Arial,sans-serif;background:linear-gradient(to right,#e3f2fd,#f9fbfd);margin:0}
header{background:linear-gradient(135deg,#1e88e5,#1565c0);color:#fff;padding:25px;text-align:center}
nav{background:#f1f5fb;padding:10px;text-align:center}
nav button{margin:5px;padding:10px 15px;border:none;border-radius:6px;cursor:pointer}
main{max-width:900px;margin:auto;padding:20px}
.card{background:#fff;padding:20px;margin-bottom:20px;border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,.08)}
button{background:#1e88e5;color:#fff;border:none;padding:10px 15px;border-radius:6px;cursor:pointer}
button:hover{background:#1565c0}
input,textarea{width:100%;padding:10px;margin:8px 0;border-radius:6px;border:1px solid #ccc}
.whatsapp-btn{background:#25D366;color:#fff;padding:5px 8px;border-radius:5px;text-decoration:none}
.page{display:none}

/* POPUPS */
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;z-index:9999}
.modal-content{background:#fff;padding:25px;border-radius:10px;text-align:center;max-width:350px}
.modal-content button{margin-top:15px}

/* LIGHTBOX */
#lightbox{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:10000}
#lightbox img{max-width:90%;max-height:90%;border-radius:10px}
</style>
</head>

<body>

<header>
<h1>Winnick Connection</h1>
<p>Meet and connect with students on campus</p>
</header>

<nav>
<button onclick="showPage('home')">Home</button>
<button onclick="showPage('add')">Add Profile</button>
<button onclick="showPage('profiles')">Profiles</button>
<button onclick="showPage('about')">About</button>
</nav>

<main>

<div class="card page" id="home">
<h2>Welcome ðŸ‘‹</h2>
<p>Create your profile and connect with fellow students easily.</p>
</div>

<div class="card page" id="add">
<h2>Add Profile</h2>
<input id="name" placeholder="Name">
<input id="course" placeholder="Course">
<input id="contact" placeholder="Phone / WhatsApp">
<textarea id="about" placeholder="About you"></textarea>
<input type="file" id="photo" accept="image/*">
<button onclick="addProfile()">Save Profile</button>
</div>

<div class="card page" id="profiles">
<h2>Student Profiles</h2>
<input id="search" placeholder="Search..." onkeyup="searchProfiles()">
<div id="profilesList"></div>
</div>

<div class="card page" id="about">
<h2>About</h2>
<p>
Built by <strong>Winnick Phiri</strong> for students to connect.
<br><br>
ðŸ“§ winnickp720@gmail.com<br>
ðŸ“ž +260 77 988 8163
</p>
</div>

</main>

<footer style="text-align:center;padding:15px;color:#666">
Â© 2026 Winnick Connection
</footer>

<!-- SUCCESS POPUP -->
<div class="modal" id="successModal">
<div class="modal-content">
<h3>âœ… Profile Added</h3>
<p>Your profile was added successfully.</p>
<button onclick="goProfiles()">View Profiles</button>
</div>
</div>

<!-- IMAGE LIGHTBOX -->
<div id="lightbox" onclick="closeLightbox()">
<img id="lightboxImg">
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
firebase.initializeApp({
apiKey:"AIzaSyBwLrCKI3pFQGBp9RHunEOMchratxl5va0",
databaseURL:"https://winnickconnection-default-rtdb.firebaseio.com"
});

const db=firebase.database().ref("profiles");

function showPage(id){
document.querySelectorAll('.page').forEach(p=>p.style.display='none');
document.getElementById(id).style.display='block';
}

showPage('home');

function addProfile(){
const name=nameInput.value=name.value.trim();
const course=courseInput.value=course.value.trim();
const contact=contactInput.value=contact.value.trim();
const aboutText=about.value;
const photoFile=photo.files[0];

if(!name||!course||!contact){alert("Fill all required fields");return;}

if(photoFile){
const reader=new FileReader();
reader.onload=e=>saveProfile(e.target.result);
reader.readAsDataURL(photoFile);
}else saveProfile("");
}

function saveProfile(photoURL){
db.push({name,course,contact,about:about.value,photo:photoURL});
successModal.style.display="flex";
name.value=course.value=contact.value=about.value="";
photo.value="";
}

function goProfiles(){
successModal.style.display="none";
showPage('profiles');
}

db.on("value",snap=>{
profilesList.innerHTML="";
const data=snap.val();
for(let k in data){
const p=data[k];
profilesList.innerHTML+=`
<div class="card">
${p.photo?`<img src="${p.photo}" style="width:60px;height:60px;border-radius:50%;cursor:pointer" onclick="openLightbox('${p.photo}')">`:""}
<h3>${p.name}</h3>
<p>${p.course}</p>
<a class="whatsapp-btn" href="https://wa.me/260${p.contact.replace(/\D/g,'')}" target="_blank">WhatsApp</a>
</div>`;
}
});

function searchProfiles(){
const t=search.value.toLowerCase();
document.querySelectorAll('#profilesList .card').forEach(c=>{
c.style.display=c.innerText.toLowerCase().includes(t)?"block":"none";
});
}

function openLightbox(src){
lightbox.style.display="flex";
lightboxImg.src=src;
}
function closeLightbox(){
lightbox.style.display="none";
}
</script>

</body>
</html>
