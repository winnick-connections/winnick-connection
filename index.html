<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-site-verification" content="1Zy00azq9cEpEdA8tlQKSs2ojR5LkDjrO2fYPbkn7uk" />
  <title>Winnick Connection</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background: linear-gradient(to right, #e3f2fd, #f9fbfd);
      margin: 0;
      padding: 0;
    }

    header {
      background: linear-gradient(135deg, #1e88e5, #1565c0);
      color: white;
      padding: 30px 20px;
      text-align: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    header h1 { margin:0; font-size:32px; letter-spacing:1px; }
    header p { margin-top:8px; opacity:0.9; }

    main { padding:30px 15px; max-width:900px; margin:auto; }

    .card {
      background:white;
      padding:20px;
      margin-bottom:20px;
      border-radius:12px;
      box-shadow:0 10px 25px rgba(0,0,0,0.08);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0,0,0,0.15);
    }

    .card h2 { margin-top:0; color:#1e88e5; }
    .card h3 { margin-bottom:5px; color:#1565c0; }

    input, textarea, #search {
      width:100%; padding:12px; margin:8px 0 14px 0;
      border-radius:8px; border:1px solid #ccc; font-size:14px;
    }

    input:focus, textarea:focus, #search:focus {
      outline:none;
      border-color:#1e88e5;
      box-shadow:0 0 8px rgba(30,136,229,0.3);
    }

    button {
      background:#1e88e5; color:white; border:none;
      border-radius:8px; padding:12px; font-size:15px;
      cursor:pointer; transition: background 0.3s ease, box-shadow 0.3s ease;
    }

    button:hover {
      background:#1565c0;
      box-shadow:0 4px 12px rgba(0,0,0,0.15);
    }

    footer { text-align:center; padding:20px; font-size:14px; color:#666; }

    .delete-btn { display:none; }

    .whatsapp-btn {
      display:inline-flex; align-items:center; gap:6px;
      background-color:#25D366; color:white; padding:6px 10px;
      border-radius:6px; text-decoration:none; font-weight:700; font-size:14px;
    }

    .whatsapp-btn:hover { background-color:#1ebe5d; }

    .feature-card { cursor:pointer; text-align:center; }
    .feature-card i { font-size:40px; color:#1e88e5; margin-bottom:10px; }
    .feature-card h3 { margin-top:0; font-size:18px; color:#1565c0; }

    @media only screen and (max-width:600px) {
      header h1{font-size:26px;} header p{font-size:14px;}
      main{padding:20px 10px;}
      .card{padding:15px;}
      input,textarea,#search,button{font-size:13px;padding:10px;}
      button{font-size:14px;}
    }

    /* Welcome popup modal */
    #welcomeModal {
      position:fixed; top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.6);
      display:flex; align-items:center; justify-content:center;
      z-index:9999; display:none;
    }

    #welcomeModal .modal-content {
      background:white; padding:30px; border-radius:12px;
      text-align:center; max-width:400px;
      box-shadow:0 10px 25px rgba(0,0,0,0.2);
    }

    #welcomeModal .modal-content h2 { color:#1e88e5; margin-bottom:15px; }
    #welcomeModal .modal-content p { margin-bottom:20px; }
    #welcomeModal .close-btn {
      background:#1e88e5; color:white; padding:10px 20px;
      border-radius:8px; cursor:pointer; border:none;
    }
    #welcomeModal .close-btn:hover { background:#1565c0; }

    /* Lightbox for full photo */
    #photoLightbox {
      position: fixed; top:0; left:0; width:100%; height:100%;
      background: rgba(0,0,0,0.85); display:none;
      justify-content:center; align-items:center; z-index:10000;
    }
    #photoLightbox img { max-width:90%; max-height:90%; border-radius:12px; }
    #photoLightbox .close-lightbox {
      position:absolute; top:20px; right:20px;
      background:#1e88e5; color:white; border:none; padding:10px 15px;
      border-radius:6px; cursor:pointer; font-size:16px;
    }
    #photoLightbox .close-lightbox:hover { background:#1565c0; }
  </style>
</head>

<body>
  <header>
    <div style="text-align:center; padding:10px; background:#f1f5fb;">
      <button onclick="showPage('homePage')">Home</button>
      <button onclick="showPage('profilePage')">Add Profile</button>
      <button onclick="showPage('profilesPage')">Profiles</button>
      <button onclick="showPage('aboutPage')">About</button>
    </div>
    <h1>Winnick Connection</h1>
    <p>Meet and connect with students on campus</p>
  </header>

  <main>
    <!-- Home Page -->
    <div class="card page" id="homePage">
      <h2>Welcome to Winnick Connection</h2>
      <p>Connect with fellow students, share your profile, and explore campus life.</p>
      <div style="display:flex; gap:15px; flex-wrap:wrap; margin-top:20px;">
        <div class="card feature-card" onclick="showPage('profilesPage'); showLoadingPopup();">
  <i class="fa-solid fa-users"></i>
  <h3>View Profiles</h3>
  <p>See all students on campus and connect with them.</p>
</div>

        <div class="card feature-card" onclick="showPage('profilePage')">
          <i class="fa-solid fa-user-plus"></i>
          <h3>Add Your Profile</h3>
          <p>Share your details and let others reach you easily.</p>
        </div>
        <div class="card feature-card" onclick="showPage('aboutPage')">
          <i class="fa-solid fa-circle-info"></i>
          <h3>About</h3>
          <p>Learn more about this platform and how it works.</p>
        </div>
      </div>
    </div>

    <!-- Create Profile Page -->
    <div class="card page" id="profilePage" style="display:none;">
      <h2>Create Your Profile</h2>
      <input type="text" id="name" placeholder="Your Name">
      <input type="text" id="course" placeholder="Course / Program">
      <input type="text" id="contact" placeholder="Phone or WhatsApp">
      <textarea id="about" placeholder="About you"></textarea>
      <input type="file" id="photo" accept="image/*">
      <button onclick="addProfile()">Add Profile</button>
      <p id="successMsg" style="display:none; color:green; font-weight:bold; margin-top:10px;">
  ✅ Profile added successfully. Go to Profiles to view it.
</p>

    </div>

   <!-- About Page -->
<div class="card page" id="aboutPage" style="display:none;">
  <h2>About Winnick Connection</h2>
  <p>
    This platform was built by <strong>Winnick Phiri</strong>, a student, to help fellow students on campus connect, share profiles, and communicate easily.
  </p>
  <p>
    Students can:
    <ul>
      <li><strong>Add their profile</strong> with name, course, contact, photo, and a short bio.</li>
      <li><strong>View other student profiles</strong> and reach out via WhatsApp or direct call.</li>
      <li><strong>Search for classmates</strong> by name or course.</li>
    </ul>
  </p>
  <p>
    For suggestions, improvements, or to report any issues, you can reach me at:<br>
    <strong>Email:</strong> <a href="mailto:winnickp720@gmail.com">winnickp720@gmail.com</a><br>
    <strong>Phone/WhatsApp:</strong> <a href="tel:+260779888163">+260 77 988 8163</a>
  </p>
</div>


    <!-- Profiles Page -->
    <div class="card page" id="profilesPage" style="display:none;">
      <h2>Student Profiles</h2>
      <input type="text" id="search" placeholder="Search by name or course..." onkeyup="searchProfiles()">
      <div id="profiles"></div>
    </div>
  </main>

  <footer>
    Winnick Connection © 2026 | Built for learning
  </footer>

  <!-- Welcome Popup -->
  <div id="welcomeModal">
    <div class="modal-content">
      <h2>Welcome to Winnick Connection!</h2>
      <p>Connect, share, and explore campus life with fellow students.</p>
      <button class="close-btn" onclick="closeWelcome()">Get Started</button>
    </div>
  </div>

  <!-- Photo Lightbox -->
  <div id="photoLightbox">
    <button class="close-lightbox" onclick="closeLightbox()">X</button>
    <img id="lightboxImg" src="">
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBwLrCKI3pFQGBp9RHunEOMchratxl5va0",
      authDomain: "winnickconnection.firebaseapp.com",
      databaseURL: "https://winnickconnection-default-rtdb.firebaseio.com",
      projectId: "winnickconnection",
      storageBucket: "winnickconnection.firebasestorage.app",
      messagingSenderId: "591164149666",
      appId: "1:591164149666:web:858da589fbd596948aacfb"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    const profilesRef = database.ref('profiles');

    function addProfile() {
      const name = document.getElementById('name').value;
      const course = document.getElementById('course').value;
      const contact = document.getElementById('contact').value;
      const about = document.getElementById('about').value;
      const photoInput = document.getElementById('photo');
      let photoURL = "";

      if (photoInput.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
          photoURL = e.target.result;
          saveProfile();
        };
        reader.readAsDataURL(photoInput.files[0]);
      } else { saveProfile(); }

      function saveProfile() {
        if(!name || !course || !contact){ alert('Please fill in name, course, and contact'); return; }
        profilesRef.push({ name, course, contact, about, photo: photoURL });
        document.getElementById('successMsg').style.display = 'block';
setTimeout(() => {
  document.getElementById('successMsg').style.display = 'none';
}, 3000);

        document.getElementById('name').value='';
        document.getElementById('course').value='';
        document.getElementById('contact').value='';
        document.getElementById('about').value='';
        document.getElementById('photo').value='';
      }
    }

    function uploadPhoto(key) {
      const fileInput = document.getElementById(`photo-${key}`);
      const file = fileInput.files[0];
      if(!file){ alert("Please select a photo to upload."); return; }
      const reader = new FileReader();
      reader.onload=function(e){ profilesRef.child(key).update({ photo:e.target.result }); alert("Photo uploaded!"); }
      reader.readAsDataURL(file);
    }

    function searchProfiles() {
      const searchText=document.getElementById('search').value.toLowerCase();
      document.querySelectorAll('#profiles .card').forEach(card=>{
        const text=card.innerText.toLowerCase();
        card.style.display=text.includes(searchText)?'block':'none';
      });
    }

    window.onload=function() {
      document.getElementById('welcomeModal').style.display='flex';
      profilesRef.on('value', snapshot=>{
        const profilesContainer=document.getElementById('profiles');
        profilesContainer.innerHTML='';
        const profiles=snapshot.val();
        if(profiles){
          Object.entries(profiles).forEach(([key, profile])=>{
            const profileDiv=document.createElement('div');
            profileDiv.className='card';
            let photoSection='';
            if(profile.photo && profile.photo!==""){
              // Add onclick to open lightbox
              photoSection=`<img src="${profile.photo}" style="width:60px;height:60px;border-radius:50%;object-fit:cover;cursor:pointer;" onclick="openLightbox('${profile.photo}')">`;
            } else {
              photoSection=`<label for="photo-${key}" style="cursor:pointer; font-size:12px; color:#1e88e5; font-weight:bold; display:inline-block; border:1px solid #1e88e5; padding:4px 6px; border-radius:4px;">+ Add Photo</label>
                <input type="file" id="photo-${key}" accept="image/*" style="display:none;" onchange="uploadPhoto('${key}')">`;
            }

            profileDiv.innerHTML=`
              <div style="display:flex; align-items:center; gap:12px;">
                ${photoSection}
                <div style="flex:1;">
                  <h3 style="margin:0; font-size:16px;">${profile.name}</h3>
                  <p style="margin:2px 0; font-size:14px;"><strong>Course:</strong> ${profile.course}</p>
                  <p style="margin:2px 0; font-size:14px;">
                    <a href="https://wa.me/260${profile.contact.replace(/^0+|[^0-9]/g,'')}" target="_blank" class="whatsapp-btn"><i class="fa-brands fa-whatsapp"></i> WhatsApp</a> | <a href="tel:${profile.contact}">Call</a>
                  </p>
                  <p style="margin:2px 0; font-size:14px;">${profile.about}</p>
                </div>
              </div>`;
            profilesContainer.appendChild(profileDiv);
          });
        }
      });
    }

    function closeWelcome(){ document.getElementById('welcomeModal').style.display='none'; }
    function showPage(pageId){
      document.querySelectorAll('.page').forEach(page=>page.style.display='none');
      document.getElementById(pageId).style.display='block';
    }

    // Lightbox functions
    function openLightbox(src){
      document.getElementById('lightboxImg').src=src;
      document.getElementById('photoLightbox').style.display='flex';
    }
    function closeLightbox(){
      document.getElementById('photoLightbox').style.display='none';
      document.getElementById('lightboxImg').src='';
    }
    // Show Back to Top button on scroll
window.onscroll = function() {
  const btn = document.getElementById('backToTop');
  if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
    btn.style.display = 'block';
  } else {
    btn.style.display = 'none';
  }
};

// Scroll to top smoothly
function scrollToTop() {
  window.scrollTo({ top: 0, behavior: 'smooth' });
}
function showLoadingPopup() {
  const popup = document.getElementById('loadingPopup');
  popup.style.display = 'flex';  // show popup
  setTimeout(() => {
    popup.style.display = 'none'; // hide after 4.5 seconds
  }, 4500);
}

  </script>
  <!-- Back to Top Button -->
<button id="backToTop" onclick="scrollToTop()" 
    style="position:fixed; bottom:20px; right:20px; display:none; 
           padding:10px 15px; font-size:14px; border:none; 
           border-radius:8px; background:#1e88e5; color:white; 
           cursor:pointer; box-shadow:0 4px 8px rgba(0,0,0,0.2);">
  ↑ Top
</button>
<!-- Loading Profiles Popup -->
<div id="loadingPopup" style="display:none; position:fixed; top:0; left:0; 
     width:100%; height:100%; background:rgba(0,0,0,0.5); 
     display:flex; justify-content:center; align-items:center; z-index:99999;">
  <div style="background:white; padding:25px 30px; border-radius:12px; 
              font-size:16px; color:#1e88e5; font-weight:bold; box-shadow:0 10px 20px rgba(0,0,0,0.2);">
    Loading profiles...
  </div>
</div>

</body>
</html>
